# Домашнее задание №5

Домашнее задание предназначено для изучения базы данных SQL через систему управления sqlite3 на языке go.

# Задание

Необходимо написать библиотеку для работы с базой данных перелётов, которая имеет следующую структуру:

![Структура базы данных](/readme/aero.png)

 - **Plane** - Хранит информацию о самолётах
 - **Passenger** - Хранит информацию о всех пассажирах
 - **Company** - Хранит информацию о всех самолётах
 - **Trip** - Хранит информацию о запланированных перелётах
 - **Taken** - Хранит информацию о занятых местах в самолёте в определённой поездке

Необходимо реализовать функции открытия и закрытия структуры **AeroDB** и методы этой структуры, так чтобы они соответствовали интерфейсу:

```go
type Sqlite3DB interface {
    OpenDB(fname string) (error)
    CloseDB() (error) 
    PlanTrip(trip Trip) (TripID int, error)
    EndTrip(tripID int) (error)
    GetTrips(from, to string) ([]Trip, error)
    GetAllTrips() ([]Trip, error)
    TakeSeat(tripID int, passenger string, seat int) (error)
    GetFreeSeats(tripID int) ([]int, error)
    AddCompany(name string) (error)
    DelCompany(name string) (error)
    AddPlane(name, companyName string, seats int) (error)
    DelPlane(name string) (error)
    AddPassenger(name string) (error)
}


type Trip struct {
    id int
    company, plane int
    timeOut, timeIn time.Time
    townOut, townIn int
}
```


# Описание методов и функций

#### Метод `OpenDB`

`Вход:` Название файла базы данных.

`Выход:` ошибка(или nil)

Метод подготавливает структуру к операциям над базой, открывая файл sqlite3 и выполняя дополнительные операции, если в вашей структуре есть что-то еще.

#### Метод `CloseDB`

`Вход:`

`Выход:` Ошибка(или nil)

Метод завершает работу с базой данных.

#### Метод `PlanTrip`

`Вход:` Названия компании и самолета, время вылета и прибытия, места начала и прибытия.

`Выход:` Id созданной поездки, ошибка(или nil)

Добавляет в базу данных новую поездку с заданной информацией, если самолёта или компании с заданными именами нет, то вернуть ошибку. Если указанное Id уже занято, то задаётся первое доступное

#### Метод `EndTrip`

`Вход:` ID поездки

`Выход:` Ошибка(или nil)

Метод завершает выбранную поездку, удаляя ее из базы данных, при этом также из Taken удаляются места, связанные с этой поездкой.

#### Метод `GetTrips`

`Вход:` Место начала и место прибытия

`Выход:` Слайс поездок, ошибка(или nil)

Метод считывает все поездки из базы данных которые начинаются в from, а заканчивается в to и возвращает их в виде слайса.

#### Метод `GetAllTrips`

`Вход:` 

`Выход:` Слайс поездок, ошибка(или nil)

Метод считывает все поездки из базы данных и возвращает их в виде слайса.

#### Метод `TakeSeat`

`Вход:` ID поездки, информация о пассажире, номер места

`Выход:` Ошибка(или nil)

Метод заносит информацию о том, что место в поездке занято некоторым пассажиром. Если пассажира нет в базе данных Passenger, то метод добавляет его. Если место занято, его нет в самолете или не существует поездки, возвращается ошибка.

#### Метод `GetFreeSeats`

`Вход:` ID поездки

`Выход:` Слайс номеров свободных мест, ошибка(или nil)

Метод ищет свободные места в поездке и возвращает их слайс.

#### Метод `AddCompany`

`Вход:` Название компании

`Выход:` Ошибка(или nil)

Метод добавляет новую компанию в базу данных. Если компания уже есть в базе данных, то возвращает ошибку


#### Метод `DelCompany`

`Вход:` Название компании

`Выход:` Ошибка(или nil)

Метод удаляет компанию из базы данных. Если компания нет в базе данных, то возвращает ошибку

#### Метод `AddPlane`

`Вход:` Название самолета, название компании, количество мест в самолёте

`Выход:` Ошибка(или nil)

Метод добавляет новый самолёт в базу данных. Если самолёт уже есть в базе, введенной компании нет, или некорректное количество мест(<= 0), то возвращает ошибку


#### Метод `Delplane`

`Вход:` Название самолёта

`Выход:` Ошибка(или nil)

Метод удаляет самолёт из базы данных. Если самолёта нет в базе данных, то возвращает ошибку

#### Метод `AddPassenger`

`Вход:` Имя

`Выход:` Ошибка(или nil)
